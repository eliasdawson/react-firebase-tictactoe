<html>
<head>
  <title>Firebase React Tic Tac Toe</title>
  <link rel="stylesheet" href="app.css">
</head>
<body>
  <div id="app"></div>
  <script src="vendor.bundle.js"></script>
  <script src="bundle.js"></script>
<!--
  <script type="text/jsx">

    var X = 'X';
    var O = 'O';

    var gameRef = new Firebase("https://blazing-inferno-190.firebaseio.com/-JqBmJEqKYiHdKFW8xg_/games/0");

    var Space = React.createClass({
      handleClick: function() {
        if ( this.props.data === '' ) {
          this.props.playFn(this.props.colIndex, this.props.rowIndex);
        }
      },

      render: function() {
        return (
          <div className="ttt-space" onClick={this.handleClick}>{this.props.data}</div>
        );
      }
    });

    var BoardRow = React.createClass({
      render: function() {
        var spaces = this.props.data.map(function (space, index) {
          return (
            <Space data={space} rowIndex={this.props.rowIndex} colIndex={index} playFn={this.props.playFn}/>
          );
        }, this);

        return (
          <div className="ttt-row">
            {spaces}
          </div>
        );
      }
    });

    var Board = React.createClass({
      getInitialState: function() {
        return {
          board: [
            ['', '', ''],
            ['', '', ''],
            ['', '', '']
          ],
          player: X
        };
      },

      componentDidMount: function() {
        var self = this;
        gameRef.on('value', function(snapshot) {
          self.setState(snapshot.val());
        });
      },

      play: function(colIndex, rowIndex) {
        var state = this.state;
        state.board[rowIndex][colIndex] = state.player;
        state.player = (state.player === X) ? O : X;
        gameRef.set(state);
      },

      render: function() {
        var rows = this.state.board.map(function (row, index) {
          return (
            <BoardRow data={row} rowIndex={index} playFn={this.play}/>
          )
        }, this);

        return (
          <div className="ttt-board">
            {rows}
          </div>
        );
      }
    });

    React.render(
      <Board />,
      document.getElementById('app')
    );

    function resetGame() {
      gameRef.set({
          board: [
            ['', '', ''],
            ['', '', ''],
            ['', '', '']
          ],
          player: X
        });
    }
  </script>
-->
</body>
</html>
